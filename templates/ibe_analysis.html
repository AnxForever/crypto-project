{% extends "base.html" %}

{% block title %}IBE性能分析 - 密码学工具平台{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title"><i class="fas fa-user-shield"></i> IBE性能分析</h1>
    <p class="page-description">
        深入分析基于身份加密（IBE）算法的性能表现，包括系统设置、密钥提取、加密解密等各个环节的性能指标。
    </p>
</div>

<!-- IBE性能概览 -->
<div class="content-card">
    <h2 class="card-title"><i class="fas fa-tachometer-alt"></i> IBE性能概览</h2>
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon"><i class="fas fa-cog"></i></div>
            <div class="stat-info">
                <div class="stat-value">42ms</div>
                <div class="stat-label">平均系统设置时间</div>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon"><i class="fas fa-key"></i></div>
            <div class="stat-info">
                <div class="stat-value">21ms</div>
                <div class="stat-label">平均密钥提取时间</div>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon"><i class="fas fa-lock"></i></div>
            <div class="stat-info">
                <div class="stat-value">17ms</div>
                <div class="stat-label">平均加密时间</div>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon"><i class="fas fa-unlock"></i></div>
            <div class="stat-info">
                <div class="stat-value">24ms</div>
                <div class="stat-label">平均解密时间</div>
            </div>
        </div>
    </div>
</div>

<!-- IBE专项分析图表展示 -->
<div class="content-card">
    <h2 class="card-title"><i class="fas fa-chart-area"></i> IBE专项性能分析图表</h2>
    <p class="card-description">基于真实算法库测试数据生成的高质量性能分析图表，专注IBE算法内部对比。</p>
    
    <div class="specialized-charts">
        <!-- IBE性能全景图 -->
        <div class="chart-section">
            <div class="chart-header">
                <h3><i class="fas fa-binoculars"></i> IBE性能全景分析</h3>
                <p>系统设置、密钥提取、加密解密全流程性能对比</p>
            </div>
            <div class="chart-image-container">
                <img src="{{ url_for('static', filename='images/ibe_only_performance_overview.png') }}" 
                     alt="IBE性能全景分析" class="analysis-chart" 
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                <div class="chart-placeholder" style="display: none;">
                    <i class="fas fa-image"></i>
                    <p>图表生成中，请稍后刷新页面</p>
                </div>
            </div>
        </div>
        
        <!-- IBE效率分析图 -->
        <div class="chart-section">
            <div class="chart-header">
                <h3><i class="fas fa-tachometer-alt"></i> IBE效率深度分析</h3>
                <p>密钥提取效率、加密吞吐量及综合性能雷达图</p>
            </div>
            <div class="chart-image-container">
                <img src="{{ url_for('static', filename='images/ibe_only_efficiency_analysis.png') }}" 
                     alt="IBE效率分析" class="analysis-chart"
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                <div class="chart-placeholder" style="display: none;">
                    <i class="fas fa-image"></i>
                    <p>图表生成中，请稍后刷新页面</p>
                </div>
            </div>
        </div>
        
        <!-- IBE消息适应性分析 -->
        <div class="chart-section">
            <div class="chart-header">
                <h3><i class="fas fa-expand-arrows-alt"></i> 消息规模适应性</h3>
                <p>不同消息类型下的性能变化趋势分析</p>
            </div>
            <div class="chart-image-container">
                <img src="{{ url_for('static', filename='images/ibe_only_message_scalability.png') }}" 
                     alt="IBE消息适应性分析" class="analysis-chart"
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                <div class="chart-placeholder" style="display: none;">
                    <i class="fas fa-image"></i>
                    <p>图表生成中，请稍后刷新页面</p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="chart-features">
        <div class="feature-item">
            <i class="fas fa-check-circle"></i>
            <span>基于真实IBE算法库调用的性能数据</span>
        </div>
        <div class="feature-item">
            <i class="fas fa-check-circle"></i>
            <span>16:10黄金比例，适配现代显示器</span>
        </div>
        <div class="feature-item">
            <i class="fas fa-check-circle"></i>
            <span>统一配色方案，便于算法识别</span>
        </div>
        <div class="feature-item">
            <i class="fas fa-check-circle"></i>
            <span>专注IBE算法内部性能对比</span>
        </div>
    </div>
</div>

<!-- 实时性能测试 -->
<div class="content-card">
    <h2 class="card-title"><i class="fas fa-stopwatch"></i> IBE性能测试</h2>
    <div class="form-group">
        <label class="form-label">测试身份标识:</label>
        <input type="text" class="form-control" id="testIdentity" value="test@example.com" placeholder="例如: alice@company.com">
    </div>
    <div class="form-group">
        <label class="form-label">测试消息:</label>
        <textarea class="form-control" id="testMessage" rows="3">这是用于IBE性能测试的示例消息，用来评估不同IBE算法的各项性能指标。</textarea>
    </div>
    
    <button class="btn btn-primary" onclick="runIBETests()" id="testBtn">
        <i class="fas fa-play"></i> 开始IBE性能测试
    </button>
    
    <div id="testProgress" style="display: none; margin-top: 20px;">
        <div style="background: #f8f9fa; border-radius: 10px; padding: 20px;">
            <div id="currentTest" style="color: #666; font-size: 14px;">准备测试...</div>
            <div style="background: #e0e0e0; border-radius: 5px; overflow: hidden; height: 8px; margin-top: 10px;">
                <div id="progressBar" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); height: 100%; width: 0%; transition: width 0.3s ease;"></div>
            </div>
        </div>
    </div>
</div>

<!-- IBE测试结果 -->
<div class="content-card" id="resultsSection" style="display: none;">
    <h2 class="card-title"><i class="fas fa-chart-line"></i> IBE测试结果</h2>
    
    <div class="ibe-results-grid">
        <div class="ibe-result-card" id="bfCard">
            <h4><i class="fas fa-shield-alt"></i> Boneh-Franklin IBE</h4>
            <div class="metrics">
                <div class="metric">
                    <span class="metric-label">系统设置:</span>
                    <span class="metric-value" id="bfSetup">-</span>
                </div>
                <div class="metric">
                    <span class="metric-label">密钥提取:</span>
                    <span class="metric-value" id="bfExtract">-</span>
                </div>
                <div class="metric">
                    <span class="metric-label">加密时间:</span>
                    <span class="metric-value" id="bfEncrypt">-</span>
                </div>
                <div class="metric">
                    <span class="metric-label">解密时间:</span>
                    <span class="metric-value" id="bfDecrypt">-</span>
                </div>
                <div class="metric">
                    <span class="metric-label">总耗时:</span>
                    <span class="metric-value total" id="bfTotal">-</span>
                </div>
            </div>
        </div>
        
        <div class="ibe-result-card" id="bbCard">
            <h4><i class="fas fa-shield-alt"></i> Boneh-Boyen IBE</h4>
            <div class="metrics">
                <div class="metric">
                    <span class="metric-label">系统设置:</span>
                    <span class="metric-value" id="bbSetup">-</span>
                </div>
                <div class="metric">
                    <span class="metric-label">密钥提取:</span>
                    <span class="metric-value" id="bbExtract">-</span>
                </div>
                <div class="metric">
                    <span class="metric-label">加密时间:</span>
                    <span class="metric-value" id="bbEncrypt">-</span>
                </div>
                <div class="metric">
                    <span class="metric-label">解密时间:</span>
                    <span class="metric-value" id="bbDecrypt">-</span>
                </div>
                <div class="metric">
                    <span class="metric-label">总耗时:</span>
                    <span class="metric-value total" id="bbTotal">-</span>
                </div>
            </div>
        </div>
        
        <div class="ibe-result-card" id="skCard">
            <h4><i class="fas fa-shield-alt"></i> Sakai-Kasahara IBE</h4>
            <div class="metrics">
                <div class="metric">
                    <span class="metric-label">系统设置:</span>
                    <span class="metric-value" id="skSetup">-</span>
                </div>
                <div class="metric">
                    <span class="metric-label">密钥提取:</span>
                    <span class="metric-value" id="skExtract">-</span>
                </div>
                <div class="metric">
                    <span class="metric-label">加密时间:</span>
                    <span class="metric-value" id="skEncrypt">-</span>
                </div>
                <div class="metric">
                    <span class="metric-label">解密时间:</span>
                    <span class="metric-value" id="skDecrypt">-</span>
                </div>
                <div class="metric">
                    <span class="metric-label">总耗时:</span>
                    <span class="metric-value total" id="skTotal">-</span>
                </div>
            </div>
        </div>
    </div>
    
    <div id="winner" style="margin-top: 30px; text-align: center;">
        <div class="alert alert-success" id="winnerAlert" style="display: none;">
            <h4>🏆 IBE性能最优</h4>
            <p id="winnerText"></p>
        </div>
    </div>
</div>

<!-- IBE算法详细分析 -->
<div class="content-card">
    <h2 class="card-title"><i class="fas fa-microscope"></i> IBE算法详细分析</h2>
    
    <div class="analysis-grid">
        <div class="analysis-card">
            <h4><i class="fas fa-shield-alt"></i> Boneh-Franklin IBE</h4>
            <div class="analysis-content">
                <p><strong>核心特点:</strong> 第一个实用的IBE方案，基于双线性对</p>
                <p><strong>安全模型:</strong> 随机预言机模型下安全</p>
                <p><strong>性能特性:</strong> 加密效率较高，解密需要配对运算</p>
                <p><strong>适用场景:</strong> 一般性IBE应用，学术研究基础</p>
                <div class="tech-specs">
                    <span class="spec-tag">双线性对</span>
                    <span class="spec-tag">AES加密</span>
                    <span class="spec-tag">PBKDF2</span>
                </div>
            </div>
        </div>
        
        <div class="analysis-card">
            <h4><i class="fas fa-shield-alt"></i> Boneh-Boyen IBE</h4>
            <div class="analysis-content">
                <p><strong>核心特点:</strong> 标准模型下安全的IBE方案</p>
                <p><strong>安全模型:</strong> 不依赖随机预言机假设</p>
                <p><strong>性能特性:</strong> 增强安全性，略增计算开销</p>
                <p><strong>适用场景:</strong> 高安全要求的企业环境</p>
                <div class="tech-specs">
                    <span class="spec-tag">标准模型</span>
                    <span class="spec-tag">AES-GCM</span>
                    <span class="spec-tag">HMAC</span>
                </div>
            </div>
        </div>
        
        <div class="analysis-card">
            <h4><i class="fas fa-shield-alt"></i> Sakai-Kasahara IBE</h4>
            <div class="analysis-content">
                <p><strong>核心特点:</strong> 高效的IBE实现，紧凑密文</p>
                <p><strong>安全模型:</strong> 基于改进的数学假设</p>
                <p><strong>性能特性:</strong> 流密码优化，快速运算</p>
                <p><strong>适用场景:</strong> 性能敏感的实时应用</p>
                <div class="tech-specs">
                    <span class="spec-tag">ChaCha20</span>
                    <span class="spec-tag">逆元运算</span>
                    <span class="spec-tag">流密码</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- IBE vs PKE对比 -->
<div class="content-card">
    <h2 class="card-title"><i class="fas fa-balance-scale"></i> IBE vs PKE 对比分析</h2>
    
    <div class="comparison-table">
        <table class="performance-table">
            <thead>
                <tr>
                    <th>特性</th>
                    <th>IBE (基于身份加密)</th>
                    <th>PKE (公钥加密)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>密钥管理</td>
                    <td>✅ 身份即公钥，简化管理</td>
                    <td>❌ 需要复杂的证书基础设施</td>
                </tr>
                <tr>
                    <td>初始化开销</td>
                    <td>❌ 需要可信第三方PKG</td>
                    <td>✅ 无需中心化初始化</td>
                </tr>
                <tr>
                    <td>加密速度</td>
                    <td>⚡ 中等 (~17ms)</td>
                    <td>⚡ 快速 (~10ms)</td>
                </tr>
                <tr>
                    <td>解密速度</td>
                    <td>⚡ 中等 (~24ms)</td>
                    <td>⚡ 快速 (~13ms)</td>
                </tr>
                <tr>
                    <td>适用场景</td>
                    <td>🏢 企业内部、医疗、邮件</td>
                    <td>🌐 互联网、电子商务、通用</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- 性能优化建议 -->
<div class="content-card">
    <h2 class="card-title"><i class="fas fa-rocket"></i> IBE性能优化建议</h2>
    
    <div class="features-grid">
        <div class="feature-card">
            <div class="feature-icon">
                <i class="fas fa-microchip"></i>
            </div>
            <div class="feature-title">硬件加速</div>
            <div class="feature-description">
                利用AES-NI指令集和椭圆曲线硬件加速，提升密码学运算性能。
            </div>
        </div>
        
        <div class="feature-card">
            <div class="feature-icon">
                <i class="fas fa-memory"></i>
            </div>
            <div class="feature-title">缓存优化</div>
            <div class="feature-description">
                缓存频繁使用的系统参数和中间计算结果，减少重复运算。
            </div>
        </div>
        
        <div class="feature-card">
            <div class="feature-icon">
                <i class="fas fa-code-branch"></i>
            </div>
            <div class="feature-title">并行处理</div>
            <div class="feature-description">
                利用多核处理器并行执行密钥提取和加密操作，提升吞吐量。
            </div>
        </div>
        
        <div class="feature-card">
            <div class="feature-icon">
                <i class="fas fa-database"></i>
            </div>
            <div class="feature-title">预计算优化</div>
            <div class="feature-description">
                预计算常用身份的密钥和参数，在实际使用时快速响应。
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block extra_scripts %}
<script>
    // 运行IBE性能测试
    async function runIBETests() {
        const identity = document.getElementById('testIdentity').value.trim();
        const message = document.getElementById('testMessage').value.trim();
        
        if (!identity || !message) {
            showAlert('请输入测试身份和消息', 'warning');
            return;
        }
        
        const testBtn = document.getElementById('testBtn');
        testBtn.disabled = true;
        testBtn.innerHTML = '<span class="loading"></span> 测试中...';
        document.getElementById('testProgress').style.display = 'block';
        
        const schemes = ['boneh_franklin', 'boneh_boyen', 'sakai_kasahara'];
        const results = {};
        let bestTime = Infinity;
        let bestScheme = '';
        
        for (let i = 0; i < schemes.length; i++) {
            const scheme = schemes[i];
            
            // 更新进度
            document.getElementById('currentTest').textContent = `正在测试 ${getSchemeDisplayName(scheme)}...`;
            document.getElementById('progressBar').style.width = `${((i + 1) / schemes.length) * 100}%`;
            
            try {
                const result = await testIBEScheme(scheme, identity, message);
                results[scheme] = result;
                
                // 更新结果显示
                updateSchemeResults(scheme, result);
                
                if (result.total < bestTime) {
                    bestTime = result.total;
                    bestScheme = scheme;
                }
                
                await new Promise(resolve => setTimeout(resolve, 100));
            } catch (error) {
                console.error(`测试 ${scheme} 失败:`, error);
                showAlert(`测试 ${getSchemeDisplayName(scheme)} 失败: ${error.message}`, 'error');
            }
        }
        
        // 显示最优结果
        if (bestScheme) {
            document.getElementById('winnerAlert').style.display = 'block';
            document.getElementById('winnerText').textContent = 
                `${getSchemeDisplayName(bestScheme)} 表现最佳，总耗时 ${bestTime.toFixed(1)}ms`;
            
            // 高亮最优方案
            document.getElementById(`${getSchemePrefix(bestScheme)}Card`).style.border = '2px solid #4caf50';
        }
        
        document.getElementById('resultsSection').style.display = 'block';
        testBtn.disabled = false;
        testBtn.innerHTML = '<i class="fas fa-play"></i> 重新测试';
        document.getElementById('testProgress').style.display = 'none';
    }
    
    // 测试单个IBE方案
    async function testIBEScheme(scheme, identity, message) {
        const times = {};
        
        // 1. 系统设置
        const setupStart = performance.now();
        const setupResponse = await fetch('/api/ibe/setup', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ scheme: scheme })
        });
        const setupData = await setupResponse.json();
        times.setup = performance.now() - setupStart;
        
        if (setupData.status !== 'success') {
            throw new Error('系统设置失败');
        }
        
        // 2. 密钥提取
        const extractStart = performance.now();
        const extractResponse = await fetch('/api/ibe/extract', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ scheme: scheme, identity: identity })
        });
        const extractData = await extractResponse.json();
        times.extract = performance.now() - extractStart;
        
        if (extractData.status !== 'success') {
            throw new Error('密钥提取失败');
        }
        
        // 3. 加密
        const encryptStart = performance.now();
        const encryptResponse = await fetch('/api/ibe/encrypt', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ scheme: scheme, identity: identity, message: message })
        });
        const encryptData = await encryptResponse.json();
        times.encrypt = performance.now() - encryptStart;
        
        if (encryptData.status !== 'success') {
            throw new Error('加密失败');
        }
        
        // 4. 解密
        const decryptStart = performance.now();
        const decryptResponse = await fetch('/api/ibe/decrypt', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                scheme: scheme,
                private_key: extractData.private_key,
                ciphertext: encryptData.ciphertext
            })
        });
        const decryptData = await decryptResponse.json();
        times.decrypt = performance.now() - decryptStart;
        
        if (decryptData.status !== 'success') {
            throw new Error('解密失败');
        }
        
        times.total = times.setup + times.extract + times.encrypt + times.decrypt;
        return times;
    }
    
    // 更新方案结果显示
    function updateSchemeResults(scheme, result) {
        const prefix = getSchemePrefix(scheme);
        document.getElementById(`${prefix}Setup`).textContent = result.setup.toFixed(1) + 'ms';
        document.getElementById(`${prefix}Extract`).textContent = result.extract.toFixed(1) + 'ms';
        document.getElementById(`${prefix}Encrypt`).textContent = result.encrypt.toFixed(1) + 'ms';
        document.getElementById(`${prefix}Decrypt`).textContent = result.decrypt.toFixed(1) + 'ms';
        document.getElementById(`${prefix}Total`).textContent = result.total.toFixed(1) + 'ms';
    }
    
    // 获取方案显示名称
    function getSchemeDisplayName(scheme) {
        const names = {
            'boneh_franklin': 'Boneh-Franklin IBE',
            'boneh_boyen': 'Boneh-Boyen IBE',
            'sakai_kasahara': 'Sakai-Kasahara IBE'
        };
        return names[scheme] || scheme;
    }
    
    // 获取方案前缀
    function getSchemePrefix(scheme) {
        const prefixes = {
            'boneh_franklin': 'bf',
            'boneh_boyen': 'bb',
            'sakai_kasahara': 'sk'
        };
        return prefixes[scheme] || scheme;
    }
</script>

<style>
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.stat-card {
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(20px);
    border-radius: 15px;
    padding: 20px;
    text-align: center;
    box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
    border: 1px solid rgba(255, 255, 255, 0.18);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
}

.stat-icon {
    font-size: 2rem;
    color: #667eea;
}

.stat-value {
    font-size: 1.8rem;
    font-weight: bold;
    color: #333;
}

.stat-label {
    color: #666;
    font-size: 0.9rem;
}

.ibe-results-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.ibe-result-card {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
    border: 1px solid rgba(255, 255, 255, 0.18);
}

.ibe-result-card h4 {
    color: #333;
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.metrics {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.metric {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid #eee;
}

.metric:last-child {
    border-bottom: none;
    margin-top: 10px;
    padding-top: 15px;
    border-top: 2px solid #667eea;
}

.metric-label {
    color: #666;
    font-size: 0.9rem;
}

.metric-value {
    font-weight: bold;
    color: #333;
}

.metric-value.total {
    color: #667eea;
    font-size: 1.1rem;
}

.analysis-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
}

.analysis-card {
    background: #f8f9fa;
    border-radius: 15px;
    padding: 20px;
    border-left: 4px solid #667eea;
}

.analysis-card h4 {
    color: #333;
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.analysis-content p {
    margin-bottom: 10px;
    color: #555;
    line-height: 1.6;
}

.tech-specs {
    margin-top: 15px;
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.spec-tag {
    background: #667eea;
    color: white;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 500;
}

.comparison-table {
    overflow-x: auto;
}

.performance-table {
    width: 100%;
    border-collapse: collapse;
    background: white;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 4px 16px rgba(0,0,0,0.1);
}

.performance-table th,
.performance-table td {
    padding: 15px;
    text-align: left;
    border-bottom: 1px solid #eee;
}

.performance-table th {
    background: #667eea;
    color: white;
    font-weight: 600;
}

.performance-table tr:hover {
    background: #f8f9fa;
}

.features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
}

.feature-card {
    background: rgba(255, 255, 255, 0.9);
    border-radius: 15px;
    padding: 20px;
    text-align: center;
    box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
    border: 1px solid rgba(255, 255, 255, 0.18);
    transition: transform 0.3s ease;
}

.feature-card:hover {
    transform: translateY(-5px);
}

.feature-icon {
    font-size: 2.5rem;
    color: #667eea;
    margin-bottom: 15px;
}

.feature-title {
    font-size: 1.2rem;
    font-weight: bold;
    color: #333;
    margin-bottom: 10px;
}

.feature-description {
    color: #666;
    line-height: 1.6;
}

/* IBE专项分析图表样式 */
.specialized-charts {
    display: grid;
    grid-template-columns: 1fr;
    gap: 30px;
    margin-bottom: 30px;
}

.chart-section {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 15px;
    padding: 25px;
    box-shadow: 0 8px 32px rgba(31, 38, 135, 0.15);
    border: 1px solid rgba(255, 255, 255, 0.3);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.chart-section:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 40px rgba(31, 38, 135, 0.25);
}

.chart-header {
    margin-bottom: 20px;
    text-align: center;
}

.chart-header h3 {
    color: #333;
    margin-bottom: 8px;
    font-size: 1.4rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

.chart-header p {
    color: #666;
    font-size: 0.95rem;
    margin: 0;
    line-height: 1.5;
}

.chart-image-container {
    position: relative;
    text-align: center;
    border-radius: 10px;
    overflow: hidden;
    background: #fafafa;
}

.analysis-chart {
    max-width: 100%;
    height: auto;
    border-radius: 10px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease;
}

.analysis-chart:hover {
    transform: scale(1.02);
}

.chart-placeholder {
    padding: 60px 20px;
    color: #999;
    font-size: 1.1rem;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
}

.chart-placeholder i {
    font-size: 3rem;
    margin-bottom: 15px;
    display: block;
    opacity: 0.6;
}

.chart-features {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 15px;
    margin-top: 25px;
    padding: 20px;
    background: rgba(102, 126, 234, 0.05);
    border-radius: 10px;
    border-left: 4px solid #667eea;
}

.chart-features .feature-item {
    display: flex;
    align-items: center;
    gap: 10px;
    color: #555;
    font-size: 0.9rem;
}

.chart-features .feature-item i {
    color: #667eea;
    font-size: 1rem;
}

.card-description {
    color: #666;
    font-size: 0.95rem;
    margin-bottom: 25px;
    line-height: 1.6;
    text-align: center;
    padding: 15px;
    background: rgba(102, 126, 234, 0.05);
    border-radius: 10px;
    border-left: 4px solid #667eea;
}

/* 响应式设计 */
@media (max-width: 768px) {
    .analysis-chart {
        border-radius: 8px;
    }
    
    .chart-section {
        padding: 20px;
    }
    
    .chart-header h3 {
        font-size: 1.2rem;
    }
    
    .chart-features {
        grid-template-columns: 1fr;
    }
}
</style>
{% endblock %} 